<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB R2019b"><title>Data Requirements</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin: 20px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.S2 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S3 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S4 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px; padding: 0px 45px 4px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S5 { color: rgb(64, 64, 64); padding: 10px 0px 6px 17px; background: rgb(255, 255, 255) none repeat scroll 0% 0% / auto padding-box border-box; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px; overflow-x: hidden; line-height: 16.996px;  }
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
.embeddedOutputsErrorElement.rightPaneElement {}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsWarningElement.rightPaneElement {}
.diagnosticMessage-wrapper {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart,.diagnosticMessage-wrapper .diagnosticMessage-causePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement,.rtcDataTipElement .textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement.rightPaneElement,.embeddedOutputsVariableStringElement.rightPaneElement {min-height: 16px;}
.rightPaneElement .textElement {padding-top: 2px; padding-left: 9px;}
.S6 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S7 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 4px 4px 0px 0px; padding: 6px 45px 4px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S8 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S9 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span>Data Requirements</span></h1><h2  class = 'S1'><span>Data Structure</span></h2><div  class = 'S2'><span>The toolbox assumes data are organized in a specific structure. This is an example of the structure for a reaching paradigm.</span></div><div  class = 'S2'><span>Data for the demo are from the </span><a href = "https://doi.org/10.1152/jn.00379.2021"><span>study</span></a><span> "Mixed matrix factorization: a novel algorithm for the extraction of kinematic-muscular synergies" by Alessandro Scano and collaborators, published in 2022 on Journal of Neurophysiology.</span></div><div  class = 'S2'><span>Here we selected a data subset of one participant, reaching towards 8 targets on the sagittal plane. There are 10 repetitions of each trial.</span></div><div  class = 'S2'><span>Loading raw EMG  and kinematic data (reaching to 8 target in sagittal plane)</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre;"><span>load(</span><span style="color: rgb(160, 32, 240);">'data.mat'</span><span>);</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S4'><span style="white-space: pre;"><span>disp(data)</span></span></div><div  class = 'S5'><div class="inlineElement eoOutputWrapper embeddedOutputsTextElement" uid="77801642" data-testid="output_0" data-width="704" data-height="101" data-hashorizontaloverflow="false" style="width: 734px; max-height: 261px;"><div class="textElement">  1Ã—80 struct array with fields:

    emg
    pos
    info
    emgtime
    postime</div></div></div></div></div><div  class = 'S6'><span>The </span><span style=' font-family: monospace;'>emg</span><span> field has </span><span style=' font-family: monospace;'>n</span><span> </span><span style=' font-family: monospace;'>*</span><span> </span><span style=' font-family: monospace;'>t</span><span> dimensions where </span><span style=' font-family: monospace;'>n</span><span> is the number of channels and </span><span style=' font-family: monospace;'>t</span><span> the number of time samples. Therefore the </span><span style=' font-family: monospace;'>emgtime</span><span> field has </span><span style=' font-family: monospace;'>t</span><span> samples. </span></div><div  class = 'S2'><span>Similarly the </span><span style=' font-family: monospace;'>postime</span><span> field has </span><span style=' font-family: monospace;'>k</span><span> samples and </span><span style=' font-family: monospace;'>pos</span><span> has </span><span style=' font-family: monospace;'>m</span><span> </span><span style=' font-family: monospace;'>*</span><span> </span><span style=' font-family: monospace;'>k</span><span> elements, where </span><span style=' font-family: monospace;'>m</span><span> is the number of channels.</span></div><div  class = 'S2'><span>The </span><span style=' font-family: monospace;'>info</span><span> field contains the information about the protocol and how the data have been collected. For example:</span></div><div class="CodeBlock"><div class="inlineWrapper outputs"><div  class = 'S7'><span style="white-space: pre;"><span>disp(data(1).info)</span></span></div><div  class = 'S5'><div class="inlineElement eoOutputWrapper embeddedOutputsTextElement" uid="37D00C9C" data-testid="output_1" data-width="704" data-height="73" data-hashorizontaloverflow="false" style="width: 734px; max-height: 261px;"><div class="textElement">      plane: 1
      start: 0
     target: 1
    t_onset: 0
      t_end: 0.5100</div></div></div></div></div><div  class = 'S6'><span style=' font-family: monospace;'>plane</span><span> indicates the plane in which the targets were displayed (1-&gt;frontal, 2-&gt; sagittal).</span></div><div  class = 'S2'><span style=' font-family: monospace;'>start</span><span> indicates the target from which the movement started.</span></div><div  class = 'S2'><span style=' font-family: monospace;'>target</span><span> indicates the target to reach.</span></div><div  class = 'S2'><span style=' font-family: monospace;'>t_onset</span><span> indicates the time of the onset of the movement, (i.e. 10% of max speed).</span></div><div  class = 'S2'><span style=' font-family: monospace;'>t_end</span><span> indicates the time of the offset of the movement, (i.e. 10% of max speed after the peak).</span></div><div  class = 'S2'><span>NB: the software assumes that these fields are completed in the data structure.</span></div><h2  class = 'S1'><span>Time alignment                </span></h2><div  class = 'S2'><span>In addition EMG and kinematic data need to be aligned in time, preferably to the onset time, i.e. t_onset = 0.</span></div><h2  class = 'S1'><span>Trial duration</span></h2><div  class = 'S2'><span>In order to subtract the tonic component to the EMG signal and extract the phasic activity, trial duration should include 400ms before onset time and 400ms after the end of the movement.</span></div><div  class = 'S2'><span></span></div><h2  class = 'S1'><span>From data struct to info struct</span></h2><div  class = 'S2'><span style=' font-family: monospace;'>SynergyAnalyzer</span><span> class has a property data and a property info and both these properties are transformed from the structures in input by the </span><span style=' font-family: monospace;'>SynergyAnalyzer</span><span> class constructor. To this end we include a function that help in this transformation.</span></div><div  class = 'S2'><span>The </span><span style=' font-family: monospace;'>getInfo</span><span> function transform the </span><span style=' font-family: monospace;'>info</span><span> field of the data structure into the info struct as required by the SynergyAnalyzer property.</span></div><div  class = 'S2'><span>The output of the </span><span style=' font-family: monospace;'>getInfo</span><span> function needs to have the following fields for each trial </span><span style=' font-family: monospace;'>i</span><span> in the data structure:</span></div><div  class = 'S2'><span> </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre;"><span>    info(i).id          </span><span style="color: rgb(60, 118, 61);">%this is the trial number</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).type        </span><span style="color: rgb(60, 118, 61);">%this could be a vector of n different types</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).selected    </span><span style="color: rgb(60, 118, 61);">%this indicates if the trial could be included in the analysis</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>   </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).events.code = [13 14];                                      </span><span style="color: rgb(60, 118, 61);">% these are the codes for the time events (we included two but more can be added)</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).events.time = [data(i).info.t_onset data(i).info.t_end];    </span><span style="color: rgb(60, 118, 61);">%these are the times at which the events occurred</span></span></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre;"><span>  </span></span></div></div></div><div  class = 'S6'><span>  </span></div><div  class = 'S2'><span>In our example the </span><span style=' font-family: monospace;'>getInfo</span><span> function set as follows:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre;"><span>ntrial = length(data);</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">for </span><span>i=1:ntrial</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(60, 118, 61);">% id</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).id = i;</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(60, 118, 61);">% type</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).type(1) = data(i).info.plane;   </span><span style="color: rgb(60, 118, 61);">% plane type</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 0, 255);">if </span><span>data(i).info.start==0   </span><span style="color: rgb(60, 118, 61);">% center-out/out-center movement, direction of motion</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>        info(i).type(2) = 1;   </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>        info(i).type(3) = data(i).info.target;</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 0, 255);">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>        info(i).type(2) = 0;</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>        info(i).type(3) = mod(data(i).info.start+3,8)+1;  </span><span style="color: rgb(60, 118, 61);">% assumes 8 targets</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(60, 118, 61);">% selected</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).selected = 1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(60, 118, 61);">% events</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).events.code = [13 14];</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    info(i).events.time = [data(i).info.t_onset data(i).info.t_end];</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">end</span></span></div></div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% Data Requirements
%% Data Structure
% The toolbox assumes data are organized in a specific structure. This is an 
% example of the structure for a reaching paradigm.
% 
% Data for the demo are from the <https://doi.org/10.1152/jn.00379.2021 study> 
% "Mixed matrix factorization: a novel algorithm for the extraction of kinematic-muscular 
% synergies" by Alessandro Scano and collaborators, published in 2022 on Journal 
% of Neurophysiology.
% 
% Here we selected a data subset of one participant, reaching towards 8 targets 
% on the sagittal plane. There are 10 repetitions of each trial.
% 
% Loading raw EMG  and kinematic data (reaching to 8 target in sagittal plane)

load('data.mat');
disp(data)
%% 
% The |emg| field has |n| |*| |t| dimensions where |n| is the number of channels 
% and |t| the number of time samples. Therefore the |emgtime| field has |t| samples. 
% 
% Similarly the |postime| field has |k| samples and |pos| has |m| |*| |k| elements, 
% where |m| is the number of channels.
% 
% The |info| field contains the information about the protocol and how the data 
% have been collected. For example:

disp(data(1).info)
%% 
% |plane| indicates the plane in which the targets were displayed (1->frontal, 
% 2-> sagittal).
% 
% |start| indicates the target from which the movement started.
% 
% |target| indicates the target to reach.
% 
% |t_onset| indicates the time of the onset of the movement, (i.e. 10% of max 
% speed).
% 
% |t_end| indicates the time of the offset of the movement, (i.e. 10% of max 
% speed after the peak).
% 
% NB: the software assumes that these fields are completed in the data structure.
%% Time alignment                
% In addition EMG and kinematic data need to be aligned in time, preferably 
% to the onset time, i.e. t_onset = 0.
%% Trial duration
% In order to subtract the tonic component to the EMG signal and extract the 
% phasic activity, trial duration should include 400ms before onset time and 400ms 
% after the end of the movement.
% 
% 
%% From data struct to info struct
% |SynergyAnalyzer| class has a property data and a property info and both these 
% properties are transformed from the structures in input by the |SynergyAnalyzer| 
% class constructor. To this end we include a function that help in this transformation.
% 
% The |getInfo| function transform the |info| field of the data structure into 
% the info struct as required by the SynergyAnalyzer property.
% 
% The output of the |getInfo| function needs to have the following fields for 
% each trial |i| in the data structure:
% 
% 

    info(i).id          %this is the trial number
    info(i).type        %this could be a vector of n different types
    info(i).selected    %this indicates if the trial could be included in the analysis
   
    info(i).events.code = [13 14];                                      % these are the codes for the time events (we included two but more can be added)
    info(i).events.time = [data(i).info.t_onset data(i).info.t_end];    %these are the times at which the events occurred
  
%% 
% 
% 
% In our example the |getInfo| function set as follows:

ntrial = length(data);

for i=1:ntrial
    % id
    info(i).id = i;
    
    % type
    info(i).type(1) = data(i).info.plane;   % plane type
    
    if data(i).info.start==0   % center-out/out-center movement, direction of motion
        info(i).type(2) = 1;   
        info(i).type(3) = data(i).info.target;
    else
        info(i).type(2) = 0;
        info(i).type(3) = mod(data(i).info.start+3,8)+1;  % assumes 8 targets
    end
    
    % selected
    info(i).selected = 1;
    
    % events
    info(i).events.code = [13 14];
    info(i).events.time = [data(i).info.t_onset data(i).info.t_end];
    
    
end
##### SOURCE END #####
--></body></html>